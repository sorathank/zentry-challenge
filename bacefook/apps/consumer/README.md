# Consumer App

A transaction producer that generates social media events using the bacefook-core package and queues them in Redis.

NOTE: This whole app is generated by AI even this docs.
I'm just a debugger.

## üìã Requirements

- Node.js >= 18.0.0
- Redis server
- NPM or Yarn package manager

## üîß Installation

```bash
# Install dependencies
npm install

# Build the project
npm run build
```

## ‚öôÔ∏è Configuration

Configure the application using environment variables:

### Redis Configuration

- `REDIS_HOST`: Redis server host (default: localhost)
- `REDIS_PORT`: Redis server port (default: 6379)
- `REDIS_PASSWORD`: Redis password (optional)
- `REDIS_DB`: Redis database number (default: 0)

## Usage

### Example Configuration

```bash
npm run dev

# Start with custom configuration
NEW_USER_BATCH_SIZE=50 INTERVAL_MS=500 npm run dev
```

## üìä Output and Monitoring

The producer provides logging and queue length:

```bash
Starting transaction producer with new user per batch: 10
Consuming message every 1000ms
Connected to Redis at localhost:6379
Added 10 transactions to queue. Queue length: 10
Queue length: 45
```

- **TransactionProducer**: Main service orchestrator
- **RedisQueue**: Redis client wrapper with queue operations
- **Config**: Environment-based configuration management
- **Event Generator**: Leverages `bacefook-core` for realistic data generation

### Data Flow

```
Event Generator ‚Üí Batch Formation ‚Üí Redis Queue ‚Üí Consumer Services
```

1. **Generation**: `bacefook-core` events
2. **Batching**: Events are collected into batches
3. **Queuing**: Batches are serialized and pushed to Redis
4. **Processing**: Downstream services consume from the queue (this will be implemented in another application)

### Health Checks

Check service health:

You might wanna replace `localhost` with your redis instance address.

```bash
# Check queue length
redis-cli -h localhost -p 6379 llen transactions

# Monitor queue in real-time
redis-cli -h localhost -p 6379 monitor
```

## üß™ Testing

### Unit Tests

```bash
npm test
```

## Output

The producer will generate transaction events and add them to the Redis queue. You'll see output like:

```log
Starting transaction producer with batch size: 10000
Consuming message every 1000ms
Added 681525 transactions to queue. Queue length: 681525
Added 151811 transactions to queue. Queue length: 833336
Added 128986 transactions to queue. Queue length: 962322
Queue Length: 962322
```
